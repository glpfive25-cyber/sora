# æ¨¡å‹ä¸å¯ç”¨é”™è¯¯è§£å†³æ–¹æ¡ˆ

## ğŸ” é”™è¯¯ä¿¡æ¯

```
åˆ†ç»„ auto ä¸‹æ¨¡å‹ sora-2 æ— å¯ç”¨æ¸ é“ï¼ˆdistributorï¼‰
```

## ğŸ¯ é—®é¢˜åŸå› 

è¿™ä¸ªé”™è¯¯è¡¨ç¤ºï¼š
1. API æä¾›å•†æ²¡æœ‰é…ç½®è¯¥æ¨¡å‹çš„å¯ç”¨æ¸ é“
2. ä½ çš„ API Key æ²¡æœ‰è®¿é—®è¯¥æ¨¡å‹çš„æƒé™
3. è¯¥æ¨¡å‹åœ¨å½“å‰ API ç«¯ç‚¹ä¸å¯ç”¨

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨æ­£ç¡®çš„æ¨¡å‹åç§°

ä¸åŒçš„ API æä¾›å•†æ”¯æŒä¸åŒçš„æ¨¡å‹åç§°ã€‚å¸¸è§çš„æ¨¡å‹åç§°ï¼š

**OpenAI å®˜æ–¹æ ¼å¼**:
- `sora-2`
- `sora-2-pro`
- `sora-2-characters`

**ç¬¬ä¸‰æ–¹ API æ ¼å¼**:
- `sora_video2`
- `sora_image`

### æ–¹æ¡ˆ 2: æ£€æŸ¥ API æä¾›å•†æ”¯æŒçš„æ¨¡å‹

1. **æŸ¥çœ‹ API æ–‡æ¡£**
   - ç™»å½•ä½ çš„ API æä¾›å•†ç½‘ç«™
   - æŸ¥çœ‹æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨

2. **æµ‹è¯•å¯ç”¨æ¨¡å‹**
   ```bash
   curl -X GET "https://api.nextaicore.com/v1/models" \
     -H "Authorization: Bearer YOUR_API_KEY"
   ```

3. **æŸ¥çœ‹å“åº”**
   ```json
   {
     "data": [
       {"id": "sora_video2"},
       {"id": "sora_image"},
       ...
     ]
   }
   ```

### æ–¹æ¡ˆ 3: ä¿®æ”¹æ¨¡å‹æ˜ å°„

æˆ‘å·²ç»æ›´æ–°äº†ä»£ç ï¼Œç°åœ¨ä¼šä¿ç•™åŸå§‹æ¨¡å‹åç§°ã€‚å¦‚æœä½ çš„ API æä¾›å•†ä½¿ç”¨ä¸åŒçš„æ¨¡å‹åï¼Œå¯ä»¥ä¿®æ”¹æ˜ å°„ï¼š

ç¼–è¾‘ `sora2.js`ï¼Œæ‰¾åˆ° `createVideoWithCharacter` æ–¹æ³•ä¸­çš„ `modelMapping`ï¼š

```javascript
const modelMapping = {
  'sora_video2': 'YOUR_API_MODEL_NAME',  // æ”¹ä¸ºä½ çš„ API æ”¯æŒçš„åç§°
  'sora-2': 'YOUR_API_MODEL_NAME',
  // ...
};
```

### æ–¹æ¡ˆ 4: ä½¿ç”¨æ™®é€šè§†é¢‘ç”Ÿæˆï¼ˆä¸ä½¿ç”¨è§’è‰²ï¼‰

å¦‚æœè§’è‰²åŠŸèƒ½ä¸å¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„è§†é¢‘ç”Ÿæˆï¼š

1. åˆ‡æ¢åˆ°"è§†é¢‘ç”Ÿæˆ"æ ‡ç­¾ï¼ˆä¸æ˜¯"è§’è‰²è§†é¢‘ç”Ÿæˆ"ï¼‰
2. è¾“å…¥æç¤ºè¯ï¼ˆä¸éœ€è¦ @usernameï¼‰
3. é€‰æ‹©å¯ç”¨çš„æ¨¡å‹
4. ç”Ÿæˆè§†é¢‘

## ğŸ”§ æ£€æŸ¥æ­¥éª¤

### æ­¥éª¤ 1: ç¡®è®¤ API Key æœ‰æ•ˆ

```bash
npm run test:api
```

æŸ¥çœ‹è¾“å‡ºä¸­çš„"å¯ç”¨æ¨¡å‹"åˆ—è¡¨ã€‚

### æ­¥éª¤ 2: æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

é‡å¯æœåŠ¡å™¨å¹¶æŸ¥çœ‹æ—¥å¿—ï¼š

```bash
npm start
```

å°è¯•ç”Ÿæˆè§†é¢‘æ—¶ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¸­çš„ï¼š
```
[Sora2] Model mapping: sora_video2 -> sora_video2
[Sora2] Using mapped model: sora_video2
```

### æ­¥éª¤ 3: æµ‹è¯•ä¸åŒçš„æ¨¡å‹

åœ¨å‰ç«¯å°è¯•ä¸åŒçš„æ¨¡å‹é€‰é¡¹ï¼š
- Sora è§†é¢‘ æ ‡å‡† (10ç§’)
- Sora è§†é¢‘ æ¨ªå± (10ç§’)
- Sora è§†é¢‘ ç«–å± (10ç§’)

çœ‹å“ªä¸ªå¯ä»¥å·¥ä½œã€‚

## ğŸ“ API æä¾›å•†ç‰¹å®šé…ç½®

### å¦‚æœä½¿ç”¨ api.nextaicore.com

è¿™ä¸ª API å¯èƒ½ä½¿ç”¨ä¸åŒçš„æ¨¡å‹åç§°ã€‚å°è¯•ï¼š

1. **æ£€æŸ¥æ”¯æŒçš„æ¨¡å‹**
   ```bash
   curl https://api.nextaicore.com/v1/models \
     -H "Authorization: Bearer YOUR_API_KEY"
   ```

2. **æ ¹æ®å“åº”æ›´æ–°æ¨¡å‹å**

### å¦‚æœä½¿ç”¨ apipro.maynor1024.live

å‚è€ƒ `.env.example` ä¸­çš„é…ç½®ï¼š
```env
SORA_BASE_URL=https://apipro.maynor1024.live/
modelï¼š sora-2-characters
```

è¿™è¡¨æ˜è¯¥ API æ”¯æŒ `sora-2-characters` æ¨¡å‹ã€‚

## ğŸ› ï¸ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

### é€‰é¡¹ A: åˆ‡æ¢ API æä¾›å•†

å¦‚æœå½“å‰ API ä¸æ”¯æŒè§’è‰²åŠŸèƒ½ï¼Œå¯ä»¥å°è¯•åˆ‡æ¢åˆ°æ”¯æŒçš„ APIï¼š

ç¼–è¾‘ `.env`:
```env
SORA_API_KEY=ä½ çš„æ–°API_Key
SORA_BASE_URL=https://apipro.maynor1024.live/
```

### é€‰é¡¹ B: ä½¿ç”¨æ™®é€šè§†é¢‘ç”Ÿæˆ

ä¸ä½¿ç”¨è§’è‰²åŠŸèƒ½ï¼Œç›´æ¥ç”Ÿæˆè§†é¢‘ï¼š

```javascript
// ä¸ä½¿ç”¨ @username
const prompt = "ä¸€ä¸ªå¡é€šè§’è‰²åœ¨è·³èˆ";

// ä½¿ç”¨æ™®é€šè§†é¢‘ç”Ÿæˆ API
fetch('/api/video/generate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    prompt: prompt,
    model: 'sora_video2',
    options: {
      orientation: 'portrait',
      duration: 10
    }
  })
});
```

### é€‰é¡¹ C: è”ç³» API æä¾›å•†

å¦‚æœä½ éœ€è¦è§’è‰²åŠŸèƒ½ï¼š
1. è”ç³»ä½ çš„ API æä¾›å•†
2. è¯¢é—®æ˜¯å¦æ”¯æŒè§’è‰²è§†é¢‘ç”Ÿæˆ
3. è¯¢é—®æ­£ç¡®çš„æ¨¡å‹åç§°å’Œç«¯ç‚¹

## ğŸ“Š æ¨¡å‹å¯¹ç…§è¡¨

| å‰ç«¯æ˜¾ç¤º | å‰ç«¯å€¼ | API æ¨¡å‹åï¼ˆå¯èƒ½ï¼‰ |
|---------|--------|------------------|
| Sora è§†é¢‘ æ ‡å‡† | sora_video2 | sora_video2 æˆ– sora-2 |
| Sora è§†é¢‘ æ¨ªå± | sora_video2-landscape | sora_video2 æˆ– sora-2 |
| Sora è§†é¢‘ ç«–å± | sora_video2-portrait | sora_video2 æˆ– sora-2 |
| è§’è‰²è§†é¢‘ | sora-2-characters | sora-2-characters |

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹å®Œæ•´çš„é”™è¯¯ä¿¡æ¯

æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ä¼šæ˜¾ç¤ºï¼š
```
[Sora2] Model mapping: sora_video2 -> sora_video2
[Sora2] Using mapped model: sora_video2
[Sora2] Video with character request data: {...}
```

### 2. æŸ¥çœ‹ API å“åº”

```
[Sora2] Video with character creation error: {
  message: "åˆ†ç»„ auto ä¸‹æ¨¡å‹ sora-2 æ— å¯ç”¨æ¸ é“",
  code: "...",
  ...
}
```

### 3. æµ‹è¯• API ç›´æ¥è°ƒç”¨

```bash
curl -X POST "https://api.nextaicore.com/v1/chat/completions" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "sora_video2",
    "messages": [
      {
        "role": "user",
        "content": "ç”Ÿæˆä¸€æ®µè§†é¢‘"
      }
    ]
  }'
```

## ğŸ’¡ æ¨èé…ç½®

åŸºäºé”™è¯¯ä¿¡æ¯ï¼Œæ¨èä»¥ä¸‹é…ç½®ï¼š

### é…ç½® 1: ä½¿ç”¨ sora_video2ï¼ˆæ¨èï¼‰

```env
SORA_API_KEY=ä½ çš„API_Key
SORA_BASE_URL=https://api.nextaicore.com/
```

åœ¨ä»£ç ä¸­ä½¿ç”¨ `sora_video2` æ¨¡å‹ã€‚

### é…ç½® 2: åˆ‡æ¢åˆ°æ”¯æŒè§’è‰²çš„ API

```env
SORA_API_KEY=æ–°çš„API_Key
SORA_BASE_URL=https://apipro.maynor1024.live/
```

ä½¿ç”¨ `sora-2-characters` æ¨¡å‹ã€‚

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜æŒç»­ï¼š

1. **æ”¶é›†ä¿¡æ¯**
   - API æä¾›å•†åç§°
   - æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨
   - å®Œæ•´çš„é”™è¯¯æ—¥å¿—

2. **è”ç³» API æä¾›å•†**
   - è¯¢é—®è§’è‰²è§†é¢‘ç”Ÿæˆçš„æ­£ç¡®é…ç½®
   - è¯¢é—®æ”¯æŒçš„æ¨¡å‹åç§°
   - è¯¢é—®æ˜¯å¦éœ€è¦ç‰¹æ®Šæƒé™

3. **æŸ¥çœ‹ API æ–‡æ¡£**
   - æ¨¡å‹åˆ—è¡¨
   - ç«¯ç‚¹è¯´æ˜
   - ç¤ºä¾‹ä»£ç 

---

**å½“å‰ä¿®å¤**: ä»£ç ç°åœ¨ä¼šä¿ç•™åŸå§‹æ¨¡å‹åç§°ï¼ˆå¦‚ `sora_video2`ï¼‰ï¼Œè¿™åº”è¯¥èƒ½è§£å†³å¤§éƒ¨åˆ†æ¨¡å‹ä¸å¯ç”¨çš„é—®é¢˜ã€‚
